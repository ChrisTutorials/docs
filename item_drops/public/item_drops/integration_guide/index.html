<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1315&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> | Item Drops</title>

    <meta name="description"
        content="">

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    
    <link rel="stylesheet" href="/css/custom.css">

    <meta name="generator" content="Hugo 0.146.5">
</head>

<body>
    <div class="gb-layout">
        <header class="gb-header">
    <a href="/" class="gb-brand">
        <i class="fas fa-cubes" style="color: var(--gb-primary);"></i>
        <span>Item Drops</span>
    </a>

    <div class="gb-search">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search documentation..." aria-label="Search">
    </div>

    <nav class="gb-nav">
        
        
        <a href="/item_drops/getting-started/" class="gb-nav-link ">
            Getting Started
        </a>
        
        <a href="/item_drops/api-reference/" class="gb-nav-link ">
            API Reference
        </a>
        
        <a href="/item_drops/examples/" class="gb-nav-link ">
            Examples
        </a>
        
        <a href="/item_drops/integration-guide/" class="gb-nav-link ">
            Integration Guide
        </a>
        
        <a href="/item_drops/architecture/" class="gb-nav-link ">
            Architecture
        </a>
        
    </nav>
</header>

        
        <aside class="gb-sidebar">
    <nav class="gb-sidebar-nav">
        

        
        

        

        
        <div class="gb-sidebar-section">
            <div class="gb-sidebar-title">Item Drops Plugin</div>
            
            <a href="/item_drops/getting-started/"
                class="gb-sidebar-link ">
                Getting Started
            </a>
            
            <a href="/item_drops/architecture/system-overview/"
                class="gb-sidebar-link ">
                System Architecture Overview
            </a>
            
            <a href="/item_drops/reference/"
                class="gb-sidebar-link ">
                API Reference
            </a>
            
            <a href="/item_drops/architecture/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/configuration/data-driven/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/configuration/migration/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/examples/basic-usage/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/feature_suggestions/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/godot-integration/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/implementation/data-driven-implementation/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/improvements/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/integration_guide/"
                class="gb-sidebar-link active">
                
            </a>
            
            <a href="/item_drops/readme/"
                class="gb-sidebar-link ">
                
            </a>
            
            <a href="/item_drops/unity-integration/"
                class="gb-sidebar-link ">
                
            </a>
            
        </div>
        
    </nav>
</aside>
        

        <main class="gb-main">
            
            <div class="gb-content">
                <h1></h1>
                <h1 id="itemdrops-integration-guide">ItemDrops Integration Guide</h1>
<h2 id="overview">Overview</h2>
<p>The ItemDrops plugin is designed to work agnostically with any inventory or item database system through clean interface boundaries. This guide shows how to integrate ItemDrops with your game&rsquo;s existing systems.</p>
<h2 id="architecture">Architecture</h2>
<h3 id="core-interfaces">Core Interfaces</h3>
<p>The integration is built around several key interfaces:</p>
<ul>
<li><strong><code>IItemDatabase</code></strong> - Provides item metadata and information</li>
<li><strong><code>IItemIdResolver</code></strong> - Maps ItemDrops IDs to system-specific IDs</li>
<li><strong><code>IInventoryIntegration</code></strong> - Handles adding drops to inventory systems</li>
<li><strong><code>IItemDropsGameIntegration</code></strong> - Main boundary interface for game glue code</li>
</ul>
<h3 id="data-flow">Data Flow</h3>
<pre tabindex="0"><code>ItemDrops Core → Game Integration → Inventory System
     ↓                ↓                ↓
  Drop Instance → Customized Drop → Added to Inventory
</code></pre><h2 id="quick-start">Quick Start</h2>
<h3 id="1-implement-iitemdatabase">1. Implement IItemDatabase</h3>
<p>Create your own item database implementation:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GameItemDatabase</span> : IItemDatabase
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Id =&gt; <span style="color:#e6db74">&#34;GameDatabase&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Name =&gt; <span style="color:#e6db74">&#34;My Game Items&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Description =&gt; <span style="color:#e6db74">&#34;Main game item database&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IItemInfo? GetItemInfo(<span style="color:#66d9ef">string</span> itemId)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Look up item in your game&#39;s item system</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> GetItemFromGameSystem(itemId);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IItemData? GetItemData(<span style="color:#66d9ef">string</span> itemId)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get detailed item data</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> GetDetailedItemData(itemId);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Implement other methods...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2-implement-iitemidresolver-optional">2. Implement IItemIdResolver (Optional)</h3>
<p>If you need to map between different ID systems:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GameIdResolver</span> : IItemIdResolver
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string?</span> ResolveToSystemId(<span style="color:#66d9ef">string</span> itemDropsId, <span style="color:#66d9ef">string</span> targetSystem)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Map ItemDrops ID to your inventory system ID</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> itemDropsId <span style="color:#66d9ef">switch</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;sword_iron&#34;</span> =&gt; <span style="color:#e6db74">&#34;item_001&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;potion_health&#34;</span> =&gt; <span style="color:#e6db74">&#34;item_002&#34;</span>,
</span></span><span style="display:flex;"><span>            _ =&gt; itemDropsId <span style="color:#75715e">// Fallback to original ID</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Implement other methods...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-implement-iinventoryintegration">3. Implement IInventoryIntegration</h3>
<p>Connect to your inventory system:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GameInventoryIntegration</span> : IInventoryIntegration
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> GameInventory _gameInventory;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">bool</span> CanAcceptDrops(IEnumerable&lt;DropInstance&gt; drops)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> _gameInventory.HasSpace(drops.Sum(d =&gt; d.Quantity));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> InventoryAddResult AddDrops(IEnumerable&lt;DropInstance&gt; drops)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> result = <span style="color:#66d9ef">new</span> InventoryAddResult { Success = <span style="color:#66d9ef">true</span> };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> drop <span style="color:#66d9ef">in</span> drops)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> systemId = ResolveToGameItemId(drop.ItemId);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (_gameInventory.AddItem(systemId, drop.Quantity))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                result.ItemsAdded++;
</span></span><span style="display:flex;"><span>                result.AddedItems.Add(drop);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                result.ItemsRejected++;
</span></span><span style="display:flex;"><span>                result.RejectedItems.Add(drop);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> result;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Implement other methods...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="4-create-game-integration">4. Create Game Integration</h3>
<p>Tie everything together:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GameItemDropsIntegration</span> : IItemDropsGameIntegration
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IItemDatabase ItemDatabase { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IItemIdResolver IdResolver { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IInventoryIntegration InventoryIntegration { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> GameItemDropsIntegration()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        ItemDatabase = <span style="color:#66d9ef">new</span> GameItemDatabase();
</span></span><span style="display:flex;"><span>        IdResolver = <span style="color:#66d9ef">new</span> GameIdResolver();
</span></span><span style="display:flex;"><span>        InventoryIntegration = <span style="color:#66d9ef">new</span> GameInventoryIntegration();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IEnumerable&lt;DropInstance&gt; ProcessDrops(
</span></span><span style="display:flex;"><span>        IEnumerable&lt;DropInstance&gt; drops, 
</span></span><span style="display:flex;"><span>        DropContext context)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> processedDrops = <span style="color:#66d9ef">new</span> List&lt;DropInstance&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> drop <span style="color:#66d9ef">in</span> drops)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Apply game-specific modifications</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> customizedDrop = CustomizeDrop(drop, context);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Only keep drops that can be added to inventory</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (InventoryIntegration.CanAcceptDrops(<span style="color:#66d9ef">new</span>[] { customizedDrop }))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                processedDrops.Add(customizedDrop);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> processedDrops;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> DropInstance CustomizeDrop(DropInstance drop, DropContext context)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Add game-specific metadata</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> metadata = <span style="color:#66d9ef">new</span> Dictionary&lt;<span style="color:#66d9ef">string</span>, <span style="color:#66d9ef">object</span>&gt;(drop.Metadata)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">            [&#34;DropTime&#34;]</span> = DateTime.UtcNow,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">            [&#34;PlayerLevel&#34;]</span> = context.GetData&lt;<span style="color:#66d9ef">int</span>&gt;(<span style="color:#e6db74">&#34;PlayerLevel&#34;</span>, <span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">            [&#34;Location&#34;]</span> = context.GetData&lt;<span style="color:#66d9ef">string</span>&gt;(<span style="color:#e6db74">&#34;Location&#34;</span>, <span style="color:#e6db74">&#34;Unknown&#34;</span>)
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> DropInstance(
</span></span><span style="display:flex;"><span>            drop.ItemId,
</span></span><span style="display:flex;"><span>            drop.ItemName,
</span></span><span style="display:flex;"><span>            drop.ItemType,
</span></span><span style="display:flex;"><span>            drop.Quantity,
</span></span><span style="display:flex;"><span>            drop.Rarity,
</span></span><span style="display:flex;"><span>            drop.Weight,
</span></span><span style="display:flex;"><span>            metadata
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">bool</span> IsValid()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ItemDatabase.IsValid() &amp;&amp; 
</span></span><span style="display:flex;"><span>               IdResolver.IsValid() &amp;&amp; 
</span></span><span style="display:flex;"><span>               InventoryIntegration.IsValid();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="usage-examples">Usage Examples</h2>
<h3 id="basic-drop-generation">Basic Drop Generation</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Set up the integration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> gameIntegration = <span style="color:#66d9ef">new</span> GameItemDropsIntegration();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Create drop tables with database integration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> swordDrop = <span style="color:#66d9ef">new</span> ItemDrop(<span style="color:#e6db74">&#34;sword_iron&#34;</span>, <span style="color:#ae81ff">10.0f</span>, ItemRarity.Common)
</span></span><span style="display:flex;"><span>    .WithItemDatabase(gameIntegration.ItemDatabase)
</span></span><span style="display:flex;"><span>    .WithIdResolver(gameIntegration.IdResolver)
</span></span><span style="display:flex;"><span>    .WithQuantity(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> potionDrop = <span style="color:#66d9ef">new</span> ItemDrop(<span style="color:#e6db74">&#34;potion_health&#34;</span>, <span style="color:#ae81ff">15.0f</span>, ItemRarity.Common)
</span></span><span style="display:flex;"><span>    .WithItemDatabase(gameIntegration.ItemDatabase)
</span></span><span style="display:flex;"><span>    .WithIdResolver(gameIntegration.IdResolver)
</span></span><span style="display:flex;"><span>    .WithQuantity(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Create drop table</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> dropTable = <span style="color:#66d9ef">new</span> DropTable(<span style="color:#e6db74">&#34;enemy_loot&#34;</span>, <span style="color:#e6db74">&#34;Enemy Loot Table&#34;</span>)
</span></span><span style="display:flex;"><span>    .WithDrops(<span style="color:#66d9ef">new</span>[] { swordDrop, potionDrop });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Generate drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> context = <span style="color:#66d9ef">new</span> DropContext();
</span></span><span style="display:flex;"><span>context.SetData(<span style="color:#e6db74">&#34;PlayerLevel&#34;</span>, <span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span>context.SetData(<span style="color:#e6db74">&#34;Location&#34;</span>, <span style="color:#e6db74">&#34;Forest&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> dropResult = dropTable.GenerateDrops(context);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Process drops through game integration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> processedDrops = gameIntegration.ProcessDrops(dropResult.Drops, context);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Add to inventory</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> drop <span style="color:#66d9ef">in</span> processedDrops)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    gameIntegration.InventoryIntegration.AddDrop(drop);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="advanced-configuration">Advanced Configuration</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Create conditional drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> rareDrop = <span style="color:#66d9ef">new</span> ItemDrop(<span style="color:#e6db74">&#34;armor_diamond&#34;</span>, <span style="color:#ae81ff">5.0f</span>, ItemRarity.Legendary)
</span></span><span style="display:flex;"><span>    .WithItemDatabase(gameIntegration.ItemDatabase)
</span></span><span style="display:flex;"><span>    .WithCondition(<span style="color:#66d9ef">new</span> MinimumLevelCondition(<span style="color:#ae81ff">10</span>))
</span></span><span style="display:flex;"><span>    .WithCondition(<span style="color:#66d9ef">new</span> RandomChanceCondition(<span style="color:#ae81ff">0.1f</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Create modifiers</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> luckModifier = <span style="color:#66d9ef">new</span> QuantityModifier(<span style="color:#e6db74">&#34;luck_bonus&#34;</span>, <span style="color:#ae81ff">1.5f</span>)
</span></span><span style="display:flex;"><span>    .WithCondition(<span style="color:#66d9ef">new</span> PlayerLuckCondition(<span style="color:#ae81ff">50</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Apply modifiers to drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> enhancedDrop = <span style="color:#66d9ef">new</span> ItemDrop(<span style="color:#e6db74">&#34;sword_iron&#34;</span>, <span style="color:#ae81ff">10.0f</span>, ItemRarity.Common)
</span></span><span style="display:flex;"><span>    .WithItemDatabase(gameIntegration.ItemDatabase)
</span></span><span style="display:flex;"><span>    .WithModifier(luckModifier);
</span></span></code></pre></div><h2 id="integration-patterns">Integration Patterns</h2>
<h3 id="1-unity-integration">1. Unity Integration</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnityItemDropsManager</span> : MonoBehaviour
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [SerializeField]</span> <span style="color:#66d9ef">private</span> ItemDatabaseSO _itemDatabase;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [SerializeField]</span> <span style="color:#66d9ef">private</span> InventoryManager _inventoryManager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> IItemDropsGameIntegration _integration;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> Awake()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _integration = <span style="color:#66d9ef">new</span> UnityGameIntegration(_itemDatabase, _inventoryManager);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> GenerateLoot(GameObject source)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> context = <span style="color:#66d9ef">new</span> DropContext();
</span></span><span style="display:flex;"><span>        context.SetData(<span style="color:#e6db74">&#34;PlayerLevel&#34;</span>, Player.Instance.Level);
</span></span><span style="display:flex;"><span>        context.SetData(<span style="color:#e6db74">&#34;Location&#34;</span>, currentScene.name);
</span></span><span style="display:flex;"><span>        context.SetData(<span style="color:#e6db74">&#34;Source&#34;</span>, source.name);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> drops = GetDropTableForSource(source).GenerateDrops(context);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> processedDrops = _integration.ProcessDrops(drops.Drops, context);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> drop <span style="color:#66d9ef">in</span> processedDrops)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            _inventoryManager.AddItem(drop);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2-godot-integration">2. Godot Integration</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ItemDropsManager</span> : Node
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [Export]</span> <span style="color:#66d9ef">private</span> ItemDatabaseResource _itemDatabase;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [Export]</span> <span style="color:#66d9ef">private</span> InventorySystem _inventory;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> IItemDropsGameIntegration _integration;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> _Ready()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _integration = <span style="color:#66d9ef">new</span> GodotGameIntegration(_itemDatabase, _inventory);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> GenerateEnemyLoot(Node enemy)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> context = <span style="color:#66d9ef">new</span> DropContext();
</span></span><span style="display:flex;"><span>        context.SetData(<span style="color:#e6db74">&#34;PlayerLevel&#34;</span>, GameState.PlayerLevel);
</span></span><span style="display:flex;"><span>        context.SetData(<span style="color:#e6db74">&#34;Location&#34;</span>, GetTree().CurrentScene.Name);
</span></span><span style="display:flex;"><span>        context.SetData(<span style="color:#e6db74">&#34;Source&#34;</span>, enemy.Name);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> drops = GetDropTableForEnemy(enemy).GenerateDrops(context);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> processedDrops = _integration.ProcessDrops(drops.Drops, context);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> drop <span style="color:#66d9ef">in</span> processedDrops)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            _inventory.AddItem(drop);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="best-practices">Best Practices</h2>
<h3 id="1-lazy-loading">1. Lazy Loading</h3>
<p>Load item data only when needed:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LazyItemDatabase</span> : IItemDatabase
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> Dictionary&lt;<span style="color:#66d9ef">string</span>, IItemData&gt; _cache = <span style="color:#66d9ef">new</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> IItemLoader _loader;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IItemData? GetItemData(<span style="color:#66d9ef">string</span> itemId)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (_cache.TryGetValue(itemId, <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">var</span> cached))
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> cached;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> itemData = _loader.LoadItem(itemId);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (itemData != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>            _cache[itemId] = itemData;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> itemData;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2-validation">2. Validation</h3>
<p>Always validate integrations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ValidateIntegration()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (!_gameIntegration.IsValid())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Debug.LogError(<span style="color:#e6db74">&#34;Game integration is not valid!&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Test with a sample drop</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> testDrop = <span style="color:#66d9ef">new</span> ItemDrop(<span style="color:#e6db74">&#34;test_item&#34;</span>, <span style="color:#ae81ff">1.0f</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> testContext = <span style="color:#66d9ef">new</span> DropContext();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (!testDrop.CanDrop(testContext))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Debug.LogWarning(<span style="color:#e6db74">&#34;Test drop failed validation&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-performance">3. Performance</h3>
<p>Optimize for high-frequency operations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">OptimizedGameIntegration</span> : IItemDropsGameIntegration
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> Dictionary&lt;<span style="color:#66d9ef">string</span>, IItemInfo&gt; _itemInfoCache = <span style="color:#66d9ef">new</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> DropInstance CustomizeDrop(DropInstance drop, DropContext context)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Use cached item info</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (!_itemInfoCache.TryGetValue(drop.ItemId, <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">var</span> itemInfo))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            itemInfo = ItemDatabase.GetItemInfo(drop.ItemId);
</span></span><span style="display:flex;"><span>            _itemInfoCache[drop.ItemId] = itemInfo;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Fast customization with cached data</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> CustomizeDropFast(drop, context, itemInfo);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues">Common Issues</h3>
<ol>
<li>
<p><strong>Items not found in database</strong></p>
<ul>
<li>Ensure item IDs match between ItemDrops and your database</li>
<li>Check that <code>HasItem()</code> returns true for your items</li>
</ul>
</li>
<li>
<p><strong>ID resolution failures</strong></p>
<ul>
<li>Verify mappings are registered in <code>IItemIdResolver</code></li>
<li>Check system names match between resolver and calls</li>
</ul>
</li>
<li>
<p><strong>Inventory rejections</strong></p>
<ul>
<li>Ensure <code>CanAcceptDrops()</code> properly checks capacity</li>
<li>Verify <code>AddDrops()</code> handles all edge cases</li>
</ul>
</li>
</ol>
<h3 id="debugging">Debugging</h3>
<p>Enable debug logging:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DebugGameIntegration</span> : IItemDropsGameIntegration
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IEnumerable&lt;DropInstance&gt; ProcessDrops(IEnumerable&lt;DropInstance&gt; drops, DropContext context)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Debug.Log(<span style="color:#e6db74">$&#34;Processing {drops.Count()} drops in context: {context}&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> drop <span style="color:#66d9ef">in</span> drops)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            Debug.Log(<span style="color:#e6db74">$&#34;Processing drop: {drop.ItemId} x{drop.Quantity}&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> processed = <span style="color:#66d9ef">base</span>.ProcessDrops(drops, context);
</span></span><span style="display:flex;"><span>        Debug.Log(<span style="color:#e6db74">$&#34;Processed {processed.Count()} drops successfully&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> processed;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="migration-from-existing-systems">Migration from Existing Systems</h2>
<p>If you have an existing drop system:</p>
<ol>
<li><strong>Map existing item IDs</strong> to ItemDrops IDs using <code>IItemIdResolver</code></li>
<li><strong>Create adapters</strong> for your existing inventory system</li>
<li><strong>Gradually migrate</strong> drop tables to use ItemDrops configuration</li>
<li><strong>Test thoroughly</strong> with existing save data</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>The ItemDrops integration system provides a clean, flexible boundary between drop generation and inventory management. By implementing the core interfaces, you can connect ItemDrops to any existing system while maintaining separation of concerns and testability.</p>
<p>The key benefits are:</p>
<ul>
<li><strong>Agnostic integration</strong> - Works with any inventory system</li>
<li><strong>Clean boundaries</strong> - Clear separation between systems</li>
<li><strong>Extensible</strong> - Easy to add new features and modifiers</li>
<li><strong>Testable</strong> - Each component can be tested independently</li>
</ul>

            </div>
            
        </main>

        
        <aside class="gb-toc">
            <div class="gb-toc-title">On this page</div>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#architecture">Architecture</a>
      <ul>
        <li><a href="#core-interfaces">Core Interfaces</a></li>
        <li><a href="#data-flow">Data Flow</a></li>
      </ul>
    </li>
    <li><a href="#quick-start">Quick Start</a>
      <ul>
        <li><a href="#1-implement-iitemdatabase">1. Implement IItemDatabase</a></li>
        <li><a href="#2-implement-iitemidresolver-optional">2. Implement IItemIdResolver (Optional)</a></li>
        <li><a href="#3-implement-iinventoryintegration">3. Implement IInventoryIntegration</a></li>
        <li><a href="#4-create-game-integration">4. Create Game Integration</a></li>
      </ul>
    </li>
    <li><a href="#usage-examples">Usage Examples</a>
      <ul>
        <li><a href="#basic-drop-generation">Basic Drop Generation</a></li>
        <li><a href="#advanced-configuration">Advanced Configuration</a></li>
      </ul>
    </li>
    <li><a href="#integration-patterns">Integration Patterns</a>
      <ul>
        <li><a href="#1-unity-integration">1. Unity Integration</a></li>
        <li><a href="#2-godot-integration">2. Godot Integration</a></li>
      </ul>
    </li>
    <li><a href="#best-practices">Best Practices</a>
      <ul>
        <li><a href="#1-lazy-loading">1. Lazy Loading</a></li>
        <li><a href="#2-validation">2. Validation</a></li>
        <li><a href="#3-performance">3. Performance</a></li>
      </ul>
    </li>
    <li><a href="#troubleshooting">Troubleshooting</a>
      <ul>
        <li><a href="#common-issues">Common Issues</a></li>
        <li><a href="#debugging">Debugging</a></li>
      </ul>
    </li>
    <li><a href="#migration-from-existing-systems">Migration from Existing Systems</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
        </aside>
        

        <footer class="gb-footer">
    <p>&copy; 2025 Chris Tutorials. All rights reserved.</p>
    <p>
        Built with <a href="https://gohugo.io/" target="_blank">Hugo</a> and
        <a href="https://godotengine.org/" target="_blank">Godot</a>.
    </p>
</footer>
    </div>
</body>

</html>