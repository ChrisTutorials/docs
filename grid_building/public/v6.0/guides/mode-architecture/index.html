<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>GridBuilding 6.0 Mode Architecture | GridBuilding Plugin</title>
<meta name=description content="How global modes are managed in GridBuilding 6.0 using a dedicated Mode Service."><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css><link rel=stylesheet href=/css/custom.css><meta name=generator content="Hugo 0.146.5"></head><body><div class=gb-layout><header class=gb-header><a href=/ class=gb-brand><i class="fas fa-cubes" style=color:var(--gb-primary)></i>
<span>GridBuilding Plugin</span></a><div class=gb-search><i class="fas fa-search"></i>
<input type=text placeholder="Search documentation..." aria-label=Search></div><nav class=gb-nav><a href=/ class=gb-nav-link>Home
</a><a href=/v6.0/overview/ class=gb-nav-link>Documentation
</a><a href=/v5.1/overview/ class=gb-nav-link>Grid Building Plugin Overview
</a><a href=/v6.0/api/ class=gb-nav-link>API Reference
</a><a href=/v5.1/guides/ class=gb-nav-link>Getting Started Guides
</a><a href=/v6.0/examples/ class=gb-nav-link>Examples
</a><a href=/v5.1/examples/ class=gb-nav-link>Code Examples
</a><a href=/community/ class=gb-nav-link>Community
</a><a href=/v5.1/architecture-diagrams/ class=gb-nav-link>Architecture Diagrams</a></nav></header><aside class=gb-sidebar><nav class=gb-sidebar-nav><div class=gb-sidebar-section><div class=gb-sidebar-title>V6.0s</div><a href=/v6.0/guides/6-0-readiness-status/ class=gb-sidebar-link>GridBuilding 6.0 Readiness Status
</a><a href=/v6.0/guides/getting_started/ class=gb-sidebar-link>Getting Started with GridBuilding
</a><a href=/v6.0/guides/mode-architecture/ class="gb-sidebar-link active">GridBuilding 6.0 Mode Architecture
</a><a href=/v6.0/guides/gdscript-to-csharp-mapping/ class=gb-sidebar-link>GDScript to C# Migration Guide
</a><a href=/v6.0/guides/csharp_state_integration/ class=gb-sidebar-link>C# State Integration with Godot Frontend
</a><a href=/v6.0/guides/troubleshooting/ class=gb-sidebar-link>Troubleshooting Guide
</a><a href=/v6.0/examples/godot_integration_example/ class=gb-sidebar-link>Godot Integration Example
</a><a href=/v6.0/guides/service_based_architecture/ class=gb-sidebar-link>Service-Based Architecture
</a><a href=/gridbuilding/v6-0/api/ class=gb-sidebar-link>GridBuilding API Reference</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>Grid Building Plugin v5.1.0</div><a href=/v5.1/overview/ class=gb-sidebar-link>Grid Building Plugin Overview
</a><a href=/v5.1/guides/ class=gb-sidebar-link>Getting Started Guides
</a><a href=/v5.1/api/ class=gb-sidebar-link>C# API Reference
</a><a href=/v5.1/examples/ class=gb-sidebar-link>Code Examples
</a><a href=/v5.1/architecture-diagrams/ class=gb-sidebar-link>Architecture Diagrams
</a><a href=/v5.1/debugging/ class=gb-sidebar-link>Debug Tools
</a><a href=/v5.1/migration/ class=gb-sidebar-link>Migration Guide
</a><a href=/v5.1/testing/ class=gb-sidebar-link>Testing
</a><a href=/v5.1/validation/ class=gb-sidebar-link>Validation Tools</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>Grid Building Plugin v5.0.0</div><a href=/v5.0/api/ class=gb-sidebar-link>GDScript API Reference
</a><a href=/v5.0/debugging/ class=gb-sidebar-link>Debug Tools
</a><a href=/v5.0/overview/ class=gb-sidebar-link>Grid Building Plugin v5.0.0
</a><a href=/v5.0/migration/ class=gb-sidebar-link>Migration Guide
</a><a href=/v5.0/guides/ class=gb-sidebar-link>Plugin Overview
</a><a href=/v5.0/testing/ class=gb-sidebar-link>Testing
</a><a href=/v5.0/validation/ class=gb-sidebar-link>Validation Tools</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>V6.0-Publics</div><a href=/gridbuilding/v6-0-public/api/ class=gb-sidebar-link>GridBuilding API Reference</a></div></nav></aside><main class=gb-main><div class=gb-content><h1>GridBuilding 6.0 Mode Architecture</h1><h1 id=gridbuilding-60-mode-architecture>GridBuilding 6.0 Mode Architecture</h1><h2 id=what-is-the-mode-service>What is the Mode Service?</h2><p>In GridBuilding 6.0, global modes are managed by a dedicated <strong>Mode Service</strong> instead of being exposed directly to UI or gameplay scripts.</p><ul><li><strong>ModeState</strong> is an internal data object that tracks:<ul><li>Application mode (e.g. building vs playing).</li><li>UI mode.</li><li>Edit mode.</li><li>View mode.</li><li>Game mode.</li></ul></li><li><strong>IModeService</strong> is the public C# interface that owns a single <code>ModeState</code> instance and exposes:<ul><li>Methods to change modes (e.g. <code>SetApplicationMode</code>, <code>SetModes</code>).</li><li>Events that fire when modes change.</li></ul></li></ul><p>This keeps all mode logic concentrated in one place and makes it easier to test, reason about, and extend.</p><h2 id=why-we-changed-it-in-60>Why We Changed It in 6.0</h2><p>Earlier prototypes allowed Godot nodes and other systems to talk directly to a shared <code>ModeState</code> object or legacy injector containers. This created several issues:</p><ul><li>UI elements were tightly coupled to an implementation detail (<code>ModeState</code>).</li><li>There was no single place to coordinate cross‑system behavior when modes change.</li><li>Tests had to build ad‑hoc mocks for mode handling.</li></ul><p>6.0 replaces that with a <strong>service‑oriented design</strong>:</p><ul><li>Core mode data lives in <code>ModeState</code>.</li><li>All reads and writes go through <code>IModeService</code>.</li><li>Engine layers (Godot, Unity, etc.) receive a <strong>clean service boundary</strong> instead of raw state.</li></ul><h2 id=how-the-mode-service-fits-the-overall-architecture>How the Mode Service Fits the Overall Architecture</h2><p>GridBuilding 6.0 uses a consistent pattern for core gameplay services:</p><ul><li>Placement: <code>IPlacementService</code></li><li>Manipulation: <code>IManipulationService</code></li><li>Targeting: <code>IGridTargetingService</code></li><li><strong>Modes: <code>IModeService</code></strong></li></ul><p>All of these are registered in the GridBuilding <strong>Service Registry</strong> and wired by a Godot‑side <code>ServiceCompositionRoot</code> node.</p><p>From an engine&rsquo;s point of view:</p><ul><li>The engine layer resolves services from the registry.</li><li>Systems and UI components listen to service events and call service methods.</li><li>Core logic remains engine‑agnostic and testable on pure .NET.</li></ul><h2 id=typical-usage-high-level>Typical Usage (High Level)</h2><p>When running inside Godot, the workflow looks like this:</p><ol><li>A <code>ServiceCompositionRoot</code> node starts up and registers all core services, including <code>IModeService</code>.</li><li>Systems or UI nodes resolve <code>IModeService</code> from the shared <code>ServiceRegistry</code>.</li><li>To <strong>change</strong> modes, they call methods like:<ul><li><code>modeService.SetApplicationMode(ApplicationMode.Building)</code></li><li>or <code>modeService.SetModes(appMode: ApplicationMode.Building, uiMode: UIMode.Normal)</code></li></ul></li><li>To <strong>react</strong> to changes, they subscribe to events on <code>IModeService</code> instead of wiring directly to internal state.</li></ol><p>From the perspective of a game integrator, you interact with modes by:</p><ul><li>Listening to mode change events (to update your own UI or gameplay scripts).</li><li>Invoking clearly named service methods when you want to change how the system behaves.</li></ul><h2 id=backwards-compatibility-and-migration-notes>Backwards Compatibility and Migration Notes</h2><ul><li>The new Mode Service is part of the <strong>6.0</strong> architecture and is the recommended way to work with modes.</li><li>Older Godot‑specific patterns that mutated <code>ModeState</code> directly or used legacy injector containers are being migrated to use <code>IModeService</code> internally.</li><li>No public C# API was previously shipped that requires a direct <code>ModeState</code> reference, so game code should not need breaking changes.</li></ul><p>If you are upgrading from an internal prototype that used direct <code>ModeState</code> access:</p><ul><li>Replace any code that sets fields on a shared <code>ModeState</code> with calls to <code>IModeService</code>.</li><li>Replace direct subscriptions on <code>ModeState</code> with <code>IModeService</code> events.</li></ul><h2 id=where-to-learn-more>Where to Learn More</h2><ul><li><strong>Internal contributors</strong> can find a detailed technical design in the C# plugin repository under:<ul><li><code>docs/reports/MODE_SERVICE_ARCHITECTURE.md</code></li></ul></li><li>For a broader view of 6.0 readiness and test status, see:<ul><li><a href=/v6.0/guides/6-0-readiness-status/>GridBuilding 6.0 Readiness Status</a></li></ul></li></ul></div></main><aside class=gb-toc><div class=gb-toc-title>On this page</div><nav id=TableOfContents><ul><li><a href=#what-is-the-mode-service>What is the Mode Service?</a></li><li><a href=#why-we-changed-it-in-60>Why We Changed It in 6.0</a></li><li><a href=#how-the-mode-service-fits-the-overall-architecture>How the Mode Service Fits the Overall Architecture</a></li><li><a href=#typical-usage-high-level>Typical Usage (High Level)</a></li><li><a href=#backwards-compatibility-and-migration-notes>Backwards Compatibility and Migration Notes</a></li><li><a href=#where-to-learn-more>Where to Learn More</a></li></ul></nav></aside><footer class=gb-footer><p>&copy; 2025 Chris Tutorials. All rights reserved.</p><p>Built with <a href=https://gohugo.io/ target=_blank>Hugo</a> and
<a href=https://godotengine.org/ target=_blank>Godot</a>.</p></footer></div></body></html>