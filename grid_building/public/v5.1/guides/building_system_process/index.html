<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Building System Process | GridBuilding Plugin</title>
<meta name=description content="End-to-end build placement workflow powered by the [BuildingSystem](../api/BuildingSystem/)"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css><link rel=stylesheet href=/css/custom.css><meta name=generator content="Hugo 0.146.5"></head><body><div class=gb-layout><header class=gb-header><a href=/ class=gb-brand><i class="fas fa-cubes" style=color:var(--gb-primary)></i>
<span>GridBuilding Plugin</span></a><div class=gb-search><i class="fas fa-search"></i>
<input type=text placeholder="Search documentation..." aria-label=Search></div><nav class=gb-nav><a href=/ class=gb-nav-link>Home
</a><a href=/v6.0/overview/ class=gb-nav-link>Documentation
</a><a href=/v5.1/overview/ class=gb-nav-link>Grid Building Plugin Overview
</a><a href=/v6.0/api/ class=gb-nav-link>API Reference
</a><a href=/v5.1/guides/ class=gb-nav-link>Getting Started Guides
</a><a href=/v6.0/examples/ class=gb-nav-link>Examples
</a><a href=/v5.1/examples/ class=gb-nav-link>Code Examples
</a><a href=/community/ class=gb-nav-link>Community
</a><a href=/v5.1/architecture-diagrams/ class=gb-nav-link>Architecture Diagrams</a></nav></header><aside class=gb-sidebar><nav class=gb-sidebar-nav><div class=gb-sidebar-section><div class=gb-sidebar-title>V6.0s</div><a href=/v6.0/guides/6-0-readiness-status/ class=gb-sidebar-link>GridBuilding 6.0 Readiness Status
</a><a href=/v6.0/guides/getting_started/ class=gb-sidebar-link>Getting Started with GridBuilding
</a><a href=/v6.0/guides/mode-architecture/ class=gb-sidebar-link>GridBuilding 6.0 Mode Architecture
</a><a href=/v6.0/guides/gdscript-to-csharp-mapping/ class=gb-sidebar-link>GDScript to C# Migration Guide
</a><a href=/v6.0/guides/csharp_state_integration/ class=gb-sidebar-link>C# State Integration with Godot Frontend
</a><a href=/v6.0/guides/troubleshooting/ class=gb-sidebar-link>Troubleshooting Guide
</a><a href=/v6.0/examples/godot_integration_example/ class=gb-sidebar-link>Godot Integration Example
</a><a href=/gridbuilding/v6.0-public/guides/dependency-resolution/ class=gb-sidebar-link>Dependency Resolution in GridBuilding v6.0 (Godot)
</a><a href=/gridbuilding/v6.0-public/guides/userid-quickstart/ class=gb-sidebar-link>Quick Start: Game-Owned UserId & Multi-Owner Orchestrators
</a><a href=/gridbuilding/v6.0-public/guides/building-system-architecture/ class=gb-sidebar-link>BuildingSystem Architecture (Legacy Session Orchestrator)
</a><a href=/gridbuilding/v6.0-public/guides/multi-owner-orchestration-priorities/ class=gb-sidebar-link>Multi-Owner Orchestration Priorities (v6.0)
</a><a href=/gridbuilding/v6.0/guides/placement-system-architecture/ class=gb-sidebar-link>Placement System and Architecture in GridBuilding v6.0 (Godot)
</a><a href=/gridbuilding/v6.0-public/guides/manipulation-system-architecture/ class=gb-sidebar-link>ManipulationSystemNode Architecture (Session Orchestrator)
</a><a href=/v6.0/guides/service_based_architecture/ class=gb-sidebar-link>Service-Based Architecture
</a><a href=/gridbuilding/v6-0/api/ class=gb-sidebar-link>GridBuilding API Reference</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>Grid Building Plugin v5.1.0</div><a href=/v5.1/overview/ class=gb-sidebar-link>Grid Building Plugin Overview
</a><a href=/v5.1/guides/ class=gb-sidebar-link>Getting Started Guides
</a><a href=/v5.1/api/ class=gb-sidebar-link>C# API Reference
</a><a href=/v5.1/examples/ class=gb-sidebar-link>Code Examples
</a><a href=/v5.1/architecture-diagrams/ class=gb-sidebar-link>Architecture Diagrams
</a><a href=/v5.1/debugging/ class=gb-sidebar-link>Debug Tools
</a><a href=/v5.1/migration/ class=gb-sidebar-link>Migration Guide
</a><a href=/v5.1/testing/ class=gb-sidebar-link>Testing
</a><a href=/v5.1/validation/ class=gb-sidebar-link>Validation Tools</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>Grid Building Plugin v5.0.0</div><a href=/v5.0/api/ class=gb-sidebar-link>GDScript API Reference
</a><a href=/v5.0/overview/ class=gb-sidebar-link></a><a href=/v5.0/debugging/ class=gb-sidebar-link>Debug Tools
</a><a href=/v5.0/migration/ class=gb-sidebar-link>Migration Guide
</a><a href=/v5.0/guides/ class=gb-sidebar-link>Plugin Overview
</a><a href=/v5.0/testing/ class=gb-sidebar-link>Testing
</a><a href=/v5.0/validation/ class=gb-sidebar-link>Validation Tools</a></div></nav></aside><main class=gb-main><div class=gb-content><h1>Building System Process</h1><hr><p>This page details the end‚Äëto‚Äëend build placement workflow powered by the <a href=../api/BuildingSystem/>BuildingSystem</a> - a <strong>core entry point</strong> for any grid-based building functionality.</p><h2 id=-key-entry-point>üéØ Key Entry Point</h2><p><strong>When to use:</strong> Essential for any grid building functionality - handles the complete placement workflow.</p><p><strong>Main class:</strong> <a href=../api/BuildingSystem/>BuildingSystem</a> (extends Node)<br><strong>Configuration:</strong> <a href=../api/GBConfig/>GBConfig</a> (Resource)
<strong>State management:</strong> <a href=../api/BuildingState/>BuildingState</a> (Resource)</p><p>This page details the end‚Äëto‚Äëend <strong>build placement workflow</strong>: from entering build mode with a selected placeable, through live rule validation with indicators, to final instantiation of the object in the game world.</p><h2 id=overview>Overview</h2><steps>1. Select a placeable to enter build mode.
- UI selection triggers [BuildingSystem](../api/BuildingSystem/) to activate a preview.
- [IndicatorManager](../api/IndicatorManager/) is accessed via [IndicatorContext](../api/IndicatorContext/).
2. Compute candidate tiles (collision mapping).
- Active preview shape(s) ‚Üí epsilon-filtered tile set for evaluation.
3. Generate live indicators.
- [IndicatorManager](../api/IndicatorManager/) spawns/updates [RuleCheckIndicator](../api/RuleCheckIndicator/) nodes and returns an [IndicatorSetupReport](../api/IndicatorSetupReport/).
- Optional pre-setup validation can run here to catch hard preconditions before the live loop.
- You see a live heatmap scaffolding for validity feedback.
4. Per-frame rule evaluation on indicators.
- Each physics frame, [PlacementValidator](../api/PlacementValidator/) runs [TileCheckRule](../api/TileCheckRule/) subclasses and updates indicator validity (via [RuleCheckIndicator](../api/RuleCheckIndicator/)).
- Indicators continuously reflect current validity status during preview.
5. Confirm placement.
- Player presses confirm (e.g. `gb_select`) while preview is active; guard checks ensure preview is currently valid.
6. Run full validation.
- Re-run (or reuse cached) tile checks; execute non‚Äëtile/aggregate rules (costs, biome, adjacency, dependencies, slope, clearance, etc.).
- Aggregate results into a `PlacementResult` and emit signals for build logging/reporting.
7. Commit or abort.
- If valid: instantiate the scene, attach metadata (e.g. [PlaceableInstance](../api/PlaceableInstance/)), and register with subsystems.
- If invalid: abort and surface feedback (indicator flash / log messages).
- If multi‚Äëplace is enabled, remain in preview and loop back to step 2; otherwise exit preview.</steps><h2 id=major-enhancements-in-v500>Major Enhancements in v5.0.0</h2><h3 id=-architectural-improvements>üèóÔ∏è <strong>Architectural Improvements</strong></h3><ul><li><strong>Dependency Injection Integration</strong>: Complete integration with <a href=../api/GBCompositionContainer/>GBCompositionContainer</a> for better decoupling</li><li><strong>Unified Configuration</strong>: All building settings consolidated in <a href=../api/GBConfig/>GBConfig</a> resource</li><li><strong>Enhanced State Management</strong>: Improved <a href=../api/BuildingState/>BuildingState</a> with better lifecycle handling
{/* Supports 4.5 as well. Minimum 4.4+. */}</li></ul><h3 id=-process-enhancements>üîß <strong>Process Enhancements</strong></h3><ul><li><strong>Comprehensive Workflow Documentation</strong>: New detailed end-to-end build placement workflow</li><li><strong>Enhanced Visual Process Flows</strong>: Clear documentation with step-by-step explanations</li><li><strong>Improved Error Handling</strong>: Better error reporting and user feedback throughout the process</li><li><strong>Performance Optimizations</strong>: Reduced allocations and faster validation cycles</li></ul><h3 id=-new-features>üìä <strong>New Features</strong></h3><ul><li><strong>Enhanced Preview System</strong>: More responsive live preview with better visual indicators</li><li><strong>Improved Instantiation</strong>: Better metadata attachment and subsystem registration</li><li><strong>Advanced Post-Placement Handling</strong>: Enhanced multi-place mode and manipulation support</li><li><strong>Better Edge Case Handling</strong>: Improved handling of error scenarios and edge cases</li></ul><h3 id=-debugging--diagnostics>üêõ <strong>Debugging & Diagnostics</strong></h3><ul><li><strong>Enhanced Logging</strong>: Better tracing throughout the build placement workflow</li><li><strong>Visual Debug Support</strong>: Integration with <a href=../api/GBDebugSettings/>GBDebugSettings</a> for process debugging</li><li><strong>Performance Monitoring</strong>: Built-in timing for workflow steps</li></ul><p>{/* Detailed step breakdown moved into the Steps list above. */}</p><h2 id=error--edge-scenarios>Error & Edge Scenarios</h2><table><thead><tr><th>Scenario</th><th>Handling</th></tr></thead><tbody><tr><td>Cursor leaves valid build area</td><td><code>can_place</code> false; indicators tinted invalid.</td></tr><tr><td>Placeable rule list empty</td><td>No tile indicators; full validation still runs but likely always valid.</td></tr><tr><td>Lost reference (placeable freed) mid-preview</td><td>Cancel preview; require reselection.</td></tr><tr><td>Rotation changes geometry drastically</td><td>Indicators regenerated; cached tiles invalidated.</td></tr></tbody></table><h2 id=data-flow-overview>Data Flow Overview</h2><p><strong>Primary Build Flow:</strong></p><ul><li>Selection UI (placeable chosen) ‚Üí <a href=../api/BuildingSystem/>BuildingSystem</a> ‚Üí IndicatorManager ‚Üí <a href=../api/IndicatorContext/>IndicatorContext</a></li><li><a href=../api/IndicatorContext/>IndicatorContext</a> ‚Üí Collision Mapping ‚Üí Live Indicators ‚Üí Per-frame Tile Rules (on indicators)</li><li><a href=../api/BuildingSystem/>BuildingSystem</a> (Confirm) ‚Üí Full Validation + Signals ‚Üí PlacementResult ‚Üí Instantiation (if valid)</li></ul><p><strong>Post-Placement Manipulation Flow:</strong></p><ul><li>Mode Toggle/Actions ‚Üí <a href=../api/ManipulationSystem/>ManipulationSystem</a> ‚Üí Manipulatable Nodes</li><li><a href=../api/ManipulationSystem/>ManipulationSystem</a> ‚Üí <a href=../api/IndicatorContext/>IndicatorContext</a> (move) ‚Üí Manipulatable Nodes</li><li>MOVE operation builds temporary context for manipulation</li></ul><h3 id=build-type-system-v500>Build Type System (v5.0.0+)</h3><p><strong>New in v5.0.0</strong>: The building system now uses a <code>BuildType</code> enum to differentiate between different build operation modes:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#ff7b72>enum</span> BuildType {
</span></span><span style=display:flex><span>    SINGLE,  <span style=color:#8b949e;font-style:italic>## Single click/confirmation build</span>
</span></span><span style=display:flex><span>    DRAG,    <span style=color:#8b949e;font-style:italic>## Continuous drag-building across multiple tiles</span>
</span></span><span style=display:flex><span>    AREA     <span style=color:#8b949e;font-style:italic>## Future: Build across a defined area (e.g., fence line from point A to B)</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p><strong>How it flows through the system:</strong></p><ol><li><strong>DragManager</strong> calls <code>building_system.try_build(GBEnums.BuildType.DRAG)</code> during drag operations</li><li><strong>BuildingSystem</strong> accepts <code>build_type</code> parameter in <code>try_build()</code>, <code>report_built()</code>, and <code>report_failure()</code></li><li><strong>BuildActionData</strong> stores the build type and passes it through signals</li><li><strong>GBActionLog</strong> checks build type to suppress drag/area build messages when <code>print_on_drag_build=false</code></li><li><strong>GBAudioInstancer</strong> (in demos) skips sounds and throttles failure audio based on build type</li></ol><p><strong>Benefits:</strong></p><ul><li>Clean separation between single-click and drag-building operations</li><li>Action log can properly suppress drag build spam</li><li>Audio system can throttle failure sounds during rapid drag attempts</li><li>Future-ready for area building features (fence lines, walls)</li></ul><p><strong>Example usage:</strong></p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Single build (default)</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>var</span> report <span style=color:#ff7b72;font-weight:700>=</span> building_system<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>try_build</span>()  <span style=color:#8b949e;font-style:italic># Defaults to BuildType.SINGLE</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Drag building</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>var</span> report <span style=color:#ff7b72;font-weight:700>=</span> building_system<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>try_build</span>(GBEnums<span style=color:#ff7b72;font-weight:700>.</span>BuildType<span style=color:#ff7b72;font-weight:700>.</span>DRAG)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Future area building</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>var</span> report <span style=color:#ff7b72;font-weight:700>=</span> building_system<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>try_build</span>(GBEnums<span style=color:#ff7b72;font-weight:700>.</span>BuildType<span style=color:#ff7b72;font-weight:700>.</span>AREA)
</span></span></code></pre></td></tr></table></div></div><h3 id=signals>Signals</h3><table><thead><tr><th>Signal</th><th>Emitted By</th><th>Purpose</th></tr></thead><tbody><tr><td><code>preview_changed(preview: Node)</code></td><td><a href=../api/BuildingState/>BuildingState</a></td><td>Preview instance changed; UI reacts (tooltips, ghost model).</td></tr><tr><td><code>success(build_action_data: </code><a href=../api/BuildActionData/>BuildActionData</a><code>)</code></td><td><a href=../api/BuildingState/>BuildingState</a></td><td>Placement committed; downstream indexing & save registration. <a href=../api/BuildActionData/>BuildActionData</a> contains <code>build_type</code> to differentiate SINGLE/DRAG/AREA builds.</td></tr><tr><td><code>failed(build_action_data: </code><a href=../api/BuildActionData/>BuildActionData</a><code>)</code></td><td><a href=../api/BuildingState/>BuildingState</a></td><td>Build failed; feedback to player (HUD/log), indicator flash. <a href=../api/BuildActionData/>BuildActionData</a> contains <code>build_type</code> for conditional handling.</td></tr><tr><td><code>placed_parent_changed(placed_parent: Node)</code></td><td><a href=../api/BuildingState/>BuildingState</a></td><td>Parent for placed objects changed.</td></tr><tr><td><code>system_changed(system: </code><a href=../api/BuildingSystem/>BuildingSystem</a><code>)</code></td><td><a href=../api/BuildingState/>BuildingState</a></td><td>Connected building system changed.</td></tr></tbody></table><p>{/* Testing Strategy moved to internal/testing_strategy.md */}</p><h2 id=crossreferences>Cross‚ÄëReferences</h2><ul><li><a href=/v5-0/guides/placement_chain/>Placement Chain</a>: Placement processing chain documentation</li><li><a href=/v5-0/guides/manipulation_system/>Manipulation System</a>: Object manipulation system overview</li><li><a href=/v5-0/guides/placement_rules/>Placement Rules Pipeline</a>: Placement rules system documentation</li><li><a href=/v5-0/guides/collision_mapping/>Collision Mapping</a>: Collision mapping system overview</li><li><a href=/v5-0/guides/context_and_state/>Context & State</a>: Context and state management</li><li><a href=/v5-0/guides/configuration_and_settings/>Configuration & Settings</a>: System configuration options</li></ul><p>Last updated: 2025-09-07 (converted to Steps list; refactor: <code>PlacementManager</code> ‚Üí <a href=../api/IndicatorManager/>IndicatorManager</a>; clarified Selection UI boundaries)</p><hr><p>Community & Purchase Hub: <strong><a href=https://linktr.ee/gridbuilder>Linktree ‚Äì All Grid Builder Links</a></strong></p></div></main><aside class=gb-toc><div class=gb-toc-title>On this page</div><nav id=TableOfContents><ul><li><a href=#-key-entry-point>üéØ Key Entry Point</a></li><li><a href=#overview>Overview</a></li><li><a href=#major-enhancements-in-v500>Major Enhancements in v5.0.0</a><ul><li><a href=#-architectural-improvements>üèóÔ∏è <strong>Architectural Improvements</strong></a></li><li><a href=#-process-enhancements>üîß <strong>Process Enhancements</strong></a></li><li><a href=#-new-features>üìä <strong>New Features</strong></a></li><li><a href=#-debugging--diagnostics>üêõ <strong>Debugging & Diagnostics</strong></a></li></ul></li><li><a href=#error--edge-scenarios>Error & Edge Scenarios</a></li><li><a href=#data-flow-overview>Data Flow Overview</a><ul><li><a href=#build-type-system-v500>Build Type System (v5.0.0+)</a></li><li><a href=#signals>Signals</a></li></ul></li><li><a href=#crossreferences>Cross‚ÄëReferences</a></li></ul></nav></aside><footer class=gb-footer><p>&copy; 2025 Chris Tutorials. All rights reserved.</p><p>Built with <a href=https://gohugo.io/ target=_blank>Hugo</a> and
<a href=https://godotengine.org/ target=_blank>Godot</a>.</p></footer></div></body></html>