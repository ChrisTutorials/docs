<!doctype html><html lang=en-us><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Grid Targeting | GridBuilding Plugin</title>
<meta name=description content="Grid Targeting documentation for Grid Building system"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css><link rel=stylesheet href=/css/custom.css><meta name=generator content="Hugo 0.146.5"></head><body><div class=gb-layout><header class=gb-header><a href=/ class=gb-brand><i class="fas fa-cubes" style=color:var(--gb-primary)></i>
<span>GridBuilding Plugin</span></a><div class=gb-search><i class="fas fa-search"></i>
<input type=text placeholder="Search documentation..." aria-label=Search></div><nav class=gb-nav><a href=/ class=gb-nav-link>Home
</a><a href=/v6.0/overview/ class=gb-nav-link>Documentation
</a><a href=/v5.1/overview/ class=gb-nav-link>Grid Building Plugin Overview
</a><a href=/v6.0/api/ class=gb-nav-link>API Reference
</a><a href=/v5.1/guides/ class=gb-nav-link>Getting Started Guides
</a><a href=/v6.0/examples/ class=gb-nav-link>Examples
</a><a href=/v5.1/examples/ class=gb-nav-link>Code Examples
</a><a href=/community/ class=gb-nav-link>Community
</a><a href=/v5.1/architecture-diagrams/ class=gb-nav-link>Architecture Diagrams</a></nav></header><aside class=gb-sidebar><nav class=gb-sidebar-nav><div class=gb-sidebar-section><div class=gb-sidebar-title>V6.0s</div><a href=/v6.0/guides/6-0-readiness-status/ class=gb-sidebar-link>GridBuilding 6.0 Readiness Status
</a><a href=/v6.0/guides/getting_started/ class=gb-sidebar-link>Getting Started with GridBuilding
</a><a href=/v6.0/guides/mode-architecture/ class=gb-sidebar-link>GridBuilding 6.0 Mode Architecture
</a><a href=/v6.0/guides/gdscript-to-csharp-mapping/ class=gb-sidebar-link>GDScript to C# Migration Guide
</a><a href=/v6.0/guides/csharp_state_integration/ class=gb-sidebar-link>C# State Integration with Godot Frontend
</a><a href=/v6.0/guides/troubleshooting/ class=gb-sidebar-link>Troubleshooting Guide
</a><a href=/v6.0/examples/godot_integration_example/ class=gb-sidebar-link>Godot Integration Example
</a><a href=/gridbuilding/v6.0-public/guides/dependency-resolution/ class=gb-sidebar-link>Dependency Resolution in GridBuilding v6.0 (Godot)
</a><a href=/gridbuilding/v6.0-public/guides/userid-quickstart/ class=gb-sidebar-link>Quick Start: Game-Owned UserId & Multi-Owner Orchestrators
</a><a href=/gridbuilding/v6.0-public/guides/building-system-architecture/ class=gb-sidebar-link>BuildingSystem Architecture (Legacy Session Orchestrator)
</a><a href=/gridbuilding/v6.0-public/guides/multi-owner-orchestration-priorities/ class=gb-sidebar-link>Multi-Owner Orchestration Priorities (v6.0)
</a><a href=/gridbuilding/v6.0/guides/placement-system-architecture/ class=gb-sidebar-link>Placement System and Architecture in GridBuilding v6.0 (Godot)
</a><a href=/gridbuilding/v6.0-public/guides/manipulation-system-architecture/ class=gb-sidebar-link>ManipulationSystemNode Architecture (Session Orchestrator)
</a><a href=/v6.0/guides/service_based_architecture/ class=gb-sidebar-link>Service-Based Architecture
</a><a href=/gridbuilding/v6-0/api/ class=gb-sidebar-link>GridBuilding API Reference</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>Grid Building Plugin v5.1.0</div><a href=/v5.1/overview/ class=gb-sidebar-link>Grid Building Plugin Overview
</a><a href=/v5.1/guides/ class=gb-sidebar-link>Getting Started Guides
</a><a href=/v5.1/api/ class=gb-sidebar-link>C# API Reference
</a><a href=/v5.1/examples/ class=gb-sidebar-link>Code Examples
</a><a href=/v5.1/architecture-diagrams/ class=gb-sidebar-link>Architecture Diagrams
</a><a href=/v5.1/debugging/ class=gb-sidebar-link>Debug Tools
</a><a href=/v5.1/migration/ class=gb-sidebar-link>Migration Guide
</a><a href=/v5.1/testing/ class=gb-sidebar-link>Testing
</a><a href=/v5.1/validation/ class=gb-sidebar-link>Validation Tools</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>Grid Building Plugin v5.0.0</div><a href=/v5.0/api/ class=gb-sidebar-link>GDScript API Reference
</a><a href=/v5.0/debugging/ class=gb-sidebar-link>Debug Tools
</a><a href=/v5.0/overview/ class=gb-sidebar-link>Grid Building Plugin v5.0.0
</a><a href=/v5.0/migration/ class=gb-sidebar-link>Migration Guide
</a><a href=/v5.0/guides/ class=gb-sidebar-link>Plugin Overview
</a><a href=/v5.0/testing/ class=gb-sidebar-link>Testing
</a><a href=/v5.0/validation/ class=gb-sidebar-link>Validation Tools</a></div></nav></aside><main class=gb-main><div class=gb-content><h1>Grid Targeting</h1><hr><blockquote><p>Overview of the Grid Targeting subsystem and how cursor positions map to grid coordinates.</p></blockquote><p>This page introduces the Grid Targeting subsystem used by the building workflow and explains how mouse/viewport positions become snapped grid coordinates other systems can use.</p><ul><li>API: <a href=../api/GridTargetingSystem/>GridTargetingSystem</a></li><li>Related: <a href=../api/GridTargetingState/>GridTargetingState</a>, <a href=../api/GridPositioner2D/>GridPositioner2D</a>, <a href=../api/GridTargetingSettings/>GridTargetingSettings</a></li></ul><h2 id=what-it-does>What it does</h2><p>Grid Targeting is responsible for turning pointer input into a stable, snapped target that the building and validation pipelines can consume.</p><p><strong>v5.0.0 Architectural Improvement:</strong> Clear separation between positioning and targeting:</p><ul><li><strong>GridPositioner2D</strong>: Pure input handling & positioning</li><li><strong>TargetingShapeCast2D</strong>: Dedicated collision detection</li><li><strong><a href=../api/IndicatorManager/>IndicatorManager</a></strong>: Visual feedback & validation</li></ul><p><strong>v5.1.0 Target Resolution Enhancement:</strong> Smart target resolution through collision objects:</p><ul><li><strong>Automatic Resolution</strong>: Collision objects now resolve to logical target nodes via metadata or Manipulatable components</li><li><strong>Flexible Targeting</strong>: Collision shapes can be on child nodes while targeting parent objects</li><li><strong>Metadata Support</strong>: Use <code>"root_node"</code> metadata to specify target relationships</li><li><strong>Manipulatable Integration</strong>: Automatically detects Manipulatable components for target resolution</li></ul><p><strong>Core Responsibilities:</strong></p><ul><li>Convert viewport/world coordinates to grid-space</li><li>Apply snapping rules (cell, edge, corner) and epsilon filtering to avoid flicker at boundaries</li><li>Expose the current target info for other systems (validation, indicators, placement)</li></ul><p>See also: <a href=./building_system_process/>Building System Process</a></p><h2 id=data-flow>Data flow</h2><ol><li>Input is sampled from the active viewport (mouse/touch position)</li><li><a href=../api/GridTargetingSystem/>GridTargetingSystem</a> computes a target using <a href=../api/GridPositioner2D/>GridPositioner2D</a> and settings from <a href=../api/GridTargetingSettings/>GridTargetingSettings</a></li><li>Resulting target info is stored in <a href=../api/GridTargetingState/>GridTargetingState</a></li><li>Downstream systems consume it:<ul><li>Indicators highlight the hovered cell(s)</li><li>Placement validation evaluates rules against the target</li><li>Building system uses it to place or preview objects</li></ul></li></ol><h2 id=target-resolution-v510>Target Resolution (v5.1.0+)</h2><p>In v5.1.0, the Grid Targeting system introduces intelligent target resolution that separates collision detection from logical targeting. When a collision object is detected, the system automatically resolves the appropriate target node using a priority-based search strategy.</p><h3 id=resolution-priority>Resolution Priority</h3><p>The system searches for the logical target in this order:</p><ol><li><strong>Direct Metadata</strong>: Check the collision object for <code>"root_node"</code> metadata<ul><li>Accepts <code>Node2D</code> directly or <code>NodePath</code> to resolve</li></ul></li><li><strong>Manipulatable Siblings</strong>: Search sibling nodes for <a href=../api/Manipulatable/>Manipulatable</a> components<ul><li>Uses <code>Manipulatable.root</code> as the target</li></ul></li><li><strong>Manipulatable Children</strong>: Search direct children for <a href=../api/Manipulatable/>Manipulatable</a> components</li><li><strong>Fallback</strong>: Use the collision object itself if no resolution found</li></ol><h3 id=usage-examples>Usage Examples</h3><p><strong>Example 1: Metadata-based resolution</strong></p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Collision shape is on a child node, but target should be parent</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>var</span> collision_shape: <span style=color:#f0883e;font-weight:700>CollisionShape2D</span> <span style=color:#ff7b72;font-weight:700>=</span> $CollisionShape2D
</span></span><span style=display:flex><span>collision_shape<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>set_meta</span>(<span style=color:#a5d6ff>&#34;root_node&#34;</span>, <span style=color:#f0883e;font-weight:700>NodePath</span>(<span style=color:#a5d6ff>&#34;..&#34;</span>))  <span style=color:#8b949e;font-style:italic># Target parent node</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Example 2: Manipulatable-based resolution</strong></p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Collision area with Manipulatable child</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>var</span> collision_area: <span style=color:#f0883e;font-weight:700>Area2D</span> <span style=color:#ff7b72;font-weight:700>=</span> $BuildingArea
</span></span><span style=display:flex><span><span style=color:#ff7b72>var</span> manipulatable: Manipulatable <span style=color:#ff7b72;font-weight:700>=</span> Manipulatable<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>new</span>()
</span></span><span style=display:flex><span>manipulatable<span style=color:#ff7b72;font-weight:700>.</span>root <span style=color:#ff7b72;font-weight:700>=</span> self  <span style=color:#8b949e;font-style:italic># Target is this node</span>
</span></span><span style=display:flex><span>collision_area<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>add_child</span>(manipulatable)
</span></span></code></pre></td></tr></table></div></div><h3 id=benefits>Benefits</h3><ul><li><strong>Flexible Architecture</strong>: Collision shapes can be positioned independently of logical targets</li><li><strong>Clean Separation</strong>: Physics/collision concerns separated from game logic targeting</li><li><strong>Backward Compatible</strong>: Objects without metadata use the collision object as before</li><li><strong>Performance</strong>: Resolution happens only when collision objects change</li></ul><h2 id=position-calculation-basics>Position calculation basics</h2><ul><li>World position ‚Üí grid coords: sampling the world-space cursor and converting to integer cell coordinates based on configured cell size/origin.</li><li>Snapping modes: center-of-cell, edge-aligned, or corner-snapping depending on your chosen settings.</li><li>Epsilon filtering: small movement within a cell won‚Äôt constantly resignal target changes; this prevents UI flicker.</li></ul><div class="gb-note gb-note-tip" style="background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:#fff;padding:1rem 1.5rem;border-radius:8px;margin:1.5rem 0;border-left:4px solid #047857;box-shadow:0 4px 6px rgba(0,0,0,.1)"><div style=display:flex;align-items:flex-start;gap:.75rem><span style=font-size:1.25rem;margin-top:.125rem>üí°</span><div><strong style=font-weight:600>Tip</strong><div style=font-size:.9rem;margin-top:.5rem;opacity:.95;line-height:1.5>Use [GridTargetingSettings](../api/GridTargetingSettings/) to fine-tune snapping behavior and epsilon values for your specific game requirements.</div></div></div></div><h2 id=consuming-the-current-target>Consuming the current target</h2><p>Most systems don‚Äôt compute targeting directly‚Äîthey read it from state or receive updates.</p><ul><li>Poll model/state: read the latest target info from <a href=../api/GridTargetingState/>GridTargetingState</a></li><li>Event-driven: connect to target update signals emitted by your coordination layer</li><li>Render-time: indicators query the state and render highlights for hovered cells</li></ul><p>Typical consumers:</p><ul><li>Validation/Rules: evaluate <a href=../api/PlacementValidator/>PlacementValidator</a> with the current target</li><li>Indicators: <a href=../api/TargetHighlighter/>TargetHighlighter</a> and related components</li><li>UI: hover tooltips or debug text using <a href=../api/GridTargetingDebugText/>GridTargetingDebugText</a></li><li><strong>Object Info Display</strong>: <a href=../api/TargetInformer/>TargetInformer</a> shows information about targeted and manipulated objects</li></ul><h2 id=targetinformer-ui-component-v500>TargetInformer UI Component (v5.0.0+)</h2><p>The <a href=../api/TargetInformer/>TargetInformer</a> is a dynamic UI component that displays object information with intelligent priority handling across different game states.</p><h3 id=features>Features</h3><ul><li><strong>Responsive to Targeting</strong>: Shows info immediately when hovering over objects via <code>GridTargetingState.target_changed</code> signal</li><li><strong>Manipulation Priority</strong>: Automatically switches to show manipulated objects when manipulation is active</li><li><strong>Building Preview</strong>: Displays info for building preview objects during placement</li><li><strong>Graceful Fallbacks</strong>: Handles missing settings and null targets without errors</li></ul><h3 id=priority-system>Priority System</h3><p>The TargetInformer implements a three-tier priority system:</p><table><thead><tr><th>Priority</th><th>Context</th><th>Signal Source</th><th>Use Case</th></tr></thead><tbody><tr><td><strong>1. Highest</strong></td><td>Manipulation</td><td><code>ManipulationState.active_target_node_changed</code></td><td>Shows info for objects being moved/demolished</td></tr><tr><td><strong>2. Middle</strong></td><td>Building</td><td><code>BuildingState.preview_changed</code></td><td>Shows info for building preview objects</td></tr><tr><td><strong>3. Lowest</strong></td><td>Targeting</td><td><code>GridTargetingState.target_changed</code></td><td>Shows info for hovered objects (passive targeting)</td></tr></tbody></table><p><strong>Example Behavior:</strong></p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Scenario 1: Just hovering over objects</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Player moves mouse over smithy ‚Üí TargetInformer shows &#34;Smithy&#34; info</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Scenario 2: Start manipulation</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Player selects smithy for move ‚Üí TargetInformer switches to show manipulation info</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Scenario 3: Hover another object while manipulating</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Player hovers over house while still moving smithy</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># TargetInformer STAYS on smithy (manipulation has priority)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Scenario 4: End manipulation</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Player completes move ‚Üí TargetInformer returns to showing hovered object</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=setup>Setup</h3><p>The TargetInformer connects automatically to all required signals when you call <code>resolve_gb_dependencies()</code>:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#ff7b72>var</span> informer <span style=color:#ff7b72;font-weight:700>=</span> TargetInformer<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>new</span>()
</span></span><span style=display:flex><span>informer<span style=color:#ff7b72;font-weight:700>.</span>info_parent <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#f0883e;font-weight:700>Control</span><span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>new</span>()  <span style=color:#8b949e;font-style:italic># Container for info labels</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>add_child</span>(informer)
</span></span><span style=display:flex><span>informer<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>add_child</span>(informer<span style=color:#ff7b72;font-weight:700>.</span>info_parent)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Connect to composition container</span>
</span></span><span style=display:flex><span>informer<span style=color:#ff7b72;font-weight:700>.</span><span style=color:#d2a8ff;font-weight:700>resolve_gb_dependencies</span>(composition_container)
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Now responds to targeting, manipulation, and building state changes</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=configuration>Configuration</h3><p>The TargetInformer uses <a href=../api/TargetInfoSettings/>TargetInfoSettings</a> for display formatting:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#8b949e;font-style:italic># These settings are typically configured in your GBSettings resource</span>
</span></span><span style=display:flex><span>target_info<span style=color:#ff7b72;font-weight:700>.</span>position_format <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;Position: (</span><span style=color:#a5d6ff>%s</span><span style=color:#a5d6ff>, </span><span style=color:#a5d6ff>%s</span><span style=color:#a5d6ff>)&#34;</span>
</span></span><span style=display:flex><span>target_info<span style=color:#ff7b72;font-weight:700>.</span>position_decimals <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># The TargetInformer automatically uses these settings when available</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Falls back to default formatting if settings are null</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=integration-with-info-mode>Integration with Info Mode</h3><p>The TargetInformer works seamlessly with the Info mode toggle:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#8b949e;font-style:italic># When mode changes to INFO</span>
</span></span><span style=display:flex><span>mode_state<span style=color:#ff7b72;font-weight:700>.</span>current <span style=color:#ff7b72;font-weight:700>=</span> GBEnums<span style=color:#ff7b72;font-weight:700>.</span>Mode<span style=color:#ff7b72;font-weight:700>.</span>INFO
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># TargetInformer becomes visible (if mode_state is connected)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># When mode changes to OFF</span>
</span></span><span style=display:flex><span>mode_state<span style=color:#ff7b72;font-weight:700>.</span>current <span style=color:#ff7b72;font-weight:700>=</span> GBEnums<span style=color:#ff7b72;font-weight:700>.</span>Mode<span style=color:#ff7b72;font-weight:700>.</span>OFF  
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># TargetInformer hides automatically</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=custom-object-names>Custom Object Names</h3><p>Override <code>_to_string()</code> on your object nodes to customize the display name:</p><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#8b949e;font-style:italic># On your placeable object script</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>func</span> <span style=color:#d2a8ff;font-weight:700>_to_string</span>() <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#f0883e;font-weight:700>String</span>:
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>&#34;Smithy (Level 2)&#34;</span>  <span style=color:#8b949e;font-style:italic># Shows in TargetInformer</span>
</span></span></code></pre></td></tr></table></div></div><div class="gb-note gb-note-tip" style="background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:#fff;padding:1rem 1.5rem;border-radius:8px;margin:1.5rem 0;border-left:4px solid #047857;box-shadow:0 4px 6px rgba(0,0,0,.1)"><div style=display:flex;align-items:flex-start;gap:.75rem><span style=font-size:1.25rem;margin-top:.125rem>üí°</span><div><strong style=font-weight:600>Best Practice</strong><div style=font-size:.9rem;margin-top:.5rem;opacity:.95;line-height:1.5>Connect the TargetInformer early in your scene setup (usually in `_ready()`) so it's ready to respond to targeting changes immediately when the game starts.</div></div></div></div><h2 id=configuration-1>Configuration</h2><p>Use <a href=../api/GridTargetingSettings/>GridTargetingSettings</a> to control:</p><ul><li>Cell size and origin</li><li>Snapping mode and tolerance (epsilon)</li><li>Edge/corner behavior for non-centered snapping</li></ul><p>These settings are typically provided via your composition container and shared with the <a href=../api/GridPositioner2D/>GridPositioner2D</a>.</p><h2 id=debugging-and-validation>Debugging and validation</h2><ul><li>Visualize: enable an indicator layer to color the active cell and neighbors.</li><li>Inspect text: add <a href=../api/GridTargetingDebugText/>GridTargetingDebugText</a> to render current cell, world pos, and snap mode.</li><li>Validate: run your rule set through <a href=../api/PlacementValidator/>PlacementValidator</a> using the current target to confirm expected acceptance/rejection.</li></ul><h2 id=visibility-behavior>Visibility Behavior</h2><p>The Grid Targeting system controls when the positioner is visible based on multiple interaction factors:</p><h3 id=basic-visibility-rules>Basic Visibility Rules</h3><ol><li><strong>Mouse Input Enabled</strong>: When <code>enable_mouse_input</code> is <code>true</code>, positioner follows mouse and respects all visibility settings</li><li><strong>Mouse Input Disabled</strong>: When <code>enable_mouse_input</code> is <code>false</code>, positioner operates without mouse interaction and ignores mouse-specific visibility rules</li></ol><h3 id=hide-on-handled-behavior>Hide on Handled Behavior</h3><p>The <code>hide_on_handled</code> setting provides smart visibility management:</p><table><thead><tr><th>Mouse Input</th><th>hide_on_handled</th><th>UI Element Hovered</th><th>Positioner Visible</th></tr></thead><tbody><tr><td>‚úÖ Enabled</td><td>‚úÖ true</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr><tr><td>‚úÖ Enabled</td><td>‚úÖ true</td><td>‚úÖ Yes</td><td>‚ùå No (hidden)</td></tr><tr><td>‚úÖ Enabled</td><td>‚ùå false</td><td>‚ùå No</td><td>‚úÖ Yes</td></tr><tr><td>‚úÖ Enabled</td><td>‚ùå false</td><td>‚úÖ Yes</td><td>‚úÖ Yes (visible)</td></tr><tr><td>‚ùå Disabled</td><td>‚úÖ true</td><td>Any</td><td>‚úÖ Yes (ignores UI)</td></tr><tr><td>‚ùå Disabled</td><td>‚ùå false</td><td>Any</td><td>‚úÖ Yes</td></tr></tbody></table><h3 id=practical-examples>Practical Examples</h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript data-lang=gdscript><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Example 1: Mouse-driven with auto-hide</span>
</span></span><span style=display:flex><span>settings<span style=color:#ff7b72;font-weight:700>.</span>enable_mouse_input <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>settings<span style=color:#ff7b72;font-weight:700>.</span>hide_on_handled <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Result: Positioner follows mouse, hides when hovering UI elements</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Example 2: Keyboard-only mode</span>
</span></span><span style=display:flex><span>settings<span style=color:#ff7b72;font-weight:700>.</span>enable_mouse_input <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>
</span></span><span style=display:flex><span>settings<span style=color:#ff7b72;font-weight:700>.</span>hide_on_handled <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>  <span style=color:#8b949e;font-style:italic># This setting is ignored</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Result: Positioner stays visible, controlled by keyboard/code</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Example 3: Always visible mode</span>
</span></span><span style=display:flex><span>settings<span style=color:#ff7b72;font-weight:700>.</span>enable_mouse_input <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>settings<span style=color:#ff7b72;font-weight:700>.</span>hide_on_handled <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Result: Positioner follows mouse, always visible even over UI</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=related-reading>Related reading</h2><ul><li><a href=./building_system_process/>Building System Process</a></li><li><a href=./placement_chain/>Placement Chain</a></li></ul></div></main><aside class=gb-toc><div class=gb-toc-title>On this page</div><nav id=TableOfContents><ul><li><a href=#what-it-does>What it does</a></li><li><a href=#data-flow>Data flow</a></li><li><a href=#target-resolution-v510>Target Resolution (v5.1.0+)</a><ul><li><a href=#resolution-priority>Resolution Priority</a></li><li><a href=#usage-examples>Usage Examples</a></li><li><a href=#benefits>Benefits</a></li></ul></li><li><a href=#position-calculation-basics>Position calculation basics</a></li><li><a href=#consuming-the-current-target>Consuming the current target</a></li><li><a href=#targetinformer-ui-component-v500>TargetInformer UI Component (v5.0.0+)</a><ul><li><a href=#features>Features</a></li><li><a href=#priority-system>Priority System</a></li><li><a href=#setup>Setup</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#integration-with-info-mode>Integration with Info Mode</a></li><li><a href=#custom-object-names>Custom Object Names</a></li></ul></li><li><a href=#configuration-1>Configuration</a></li><li><a href=#debugging-and-validation>Debugging and validation</a></li><li><a href=#visibility-behavior>Visibility Behavior</a><ul><li><a href=#basic-visibility-rules>Basic Visibility Rules</a></li><li><a href=#hide-on-handled-behavior>Hide on Handled Behavior</a></li><li><a href=#practical-examples>Practical Examples</a></li></ul></li><li><a href=#related-reading>Related reading</a></li></ul></nav></aside><footer class=gb-footer><p>&copy; 2025 Chris Tutorials. All rights reserved.</p><p>Built with <a href=https://gohugo.io/ target=_blank>Hugo</a> and
<a href=https://godotengine.org/ target=_blank>Godot</a>.</p></footer></div></body></html>