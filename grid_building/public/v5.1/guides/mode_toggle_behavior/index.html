<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Mode Toggle Behavior | GridBuilding Plugin</title>
<meta name=description content="Mode Toggle Behavior documentation for the Grid Building system"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css><link rel=stylesheet href=/css/custom.css><meta name=generator content="Hugo 0.146.5"></head><body><div class=gb-layout><header class=gb-header><a href=/ class=gb-brand><i class="fas fa-cubes" style=color:var(--gb-primary)></i>
<span>GridBuilding Plugin</span></a><div class=gb-search><i class="fas fa-search"></i>
<input type=text placeholder="Search documentation..." aria-label=Search></div><nav class=gb-nav><a href=/ class=gb-nav-link>Home
</a><a href=/v6.0/overview/ class=gb-nav-link>Documentation
</a><a href=/v5.1/overview/ class=gb-nav-link>Grid Building Plugin Overview
</a><a href=/v6.0/api/ class=gb-nav-link>API Reference
</a><a href=/v5.1/guides/ class=gb-nav-link>Getting Started Guides
</a><a href=/v6.0/examples/ class=gb-nav-link>Examples
</a><a href=/v5.1/examples/ class=gb-nav-link>Code Examples
</a><a href=/community/ class=gb-nav-link>Community
</a><a href=/v5.1/architecture-diagrams/ class=gb-nav-link>Architecture Diagrams</a></nav></header><aside class=gb-sidebar><nav class=gb-sidebar-nav><div class=gb-sidebar-section><div class=gb-sidebar-title>V6.0s</div><a href=/v6.0/guides/6-0-readiness-status/ class=gb-sidebar-link>GridBuilding 6.0 Readiness Status
</a><a href=/v6.0/guides/getting_started/ class=gb-sidebar-link>Getting Started with GridBuilding
</a><a href=/v6.0/guides/mode-architecture/ class=gb-sidebar-link>GridBuilding 6.0 Mode Architecture
</a><a href=/v6.0/guides/gdscript-to-csharp-mapping/ class=gb-sidebar-link>GDScript to C# Migration Guide
</a><a href=/v6.0/guides/csharp_state_integration/ class=gb-sidebar-link>C# State Integration with Godot Frontend
</a><a href=/v6.0/guides/troubleshooting/ class=gb-sidebar-link>Troubleshooting Guide
</a><a href=/v6.0/examples/godot_integration_example/ class=gb-sidebar-link>Godot Integration Example
</a><a href=/v6.0/guides/service_based_architecture/ class=gb-sidebar-link>Service-Based Architecture
</a><a href=/gridbuilding/v6-0/api/ class=gb-sidebar-link>GridBuilding API Reference</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>Grid Building Plugin v5.1.0</div><a href=/v5.1/overview/ class=gb-sidebar-link>Grid Building Plugin Overview
</a><a href=/v5.1/guides/ class=gb-sidebar-link>Getting Started Guides
</a><a href=/v5.1/api/ class=gb-sidebar-link>C# API Reference
</a><a href=/v5.1/examples/ class=gb-sidebar-link>Code Examples
</a><a href=/v5.1/architecture-diagrams/ class=gb-sidebar-link>Architecture Diagrams
</a><a href=/v5.1/debugging/ class=gb-sidebar-link>Debug Tools
</a><a href=/v5.1/migration/ class=gb-sidebar-link>Migration Guide
</a><a href=/v5.1/testing/ class=gb-sidebar-link>Testing
</a><a href=/v5.1/validation/ class=gb-sidebar-link>Validation Tools</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>Grid Building Plugin v5.0.0</div><a href=/v5.0/api/ class=gb-sidebar-link>GDScript API Reference
</a><a href=/v5.0/debugging/ class=gb-sidebar-link>Debug Tools
</a><a href=/v5.0/overview/ class=gb-sidebar-link>Grid Building Plugin v5.0.0
</a><a href=/v5.0/migration/ class=gb-sidebar-link>Migration Guide
</a><a href=/v5.0/guides/ class=gb-sidebar-link>Plugin Overview
</a><a href=/v5.0/testing/ class=gb-sidebar-link>Testing
</a><a href=/v5.0/validation/ class=gb-sidebar-link>Validation Tools</a></div><div class=gb-sidebar-section><div class=gb-sidebar-title>V6.0-Publics</div><a href=/gridbuilding/v6-0-public/api/ class=gb-sidebar-link>GridBuilding API Reference</a></div></nav></aside><main class=gb-main><div class=gb-content><h1>Mode Toggle Behavior</h1><hr><p>In the Grid Building system, pressing a mode button (or its corresponding keyboard shortcut) will activate that mode. If you press the same button or key again while the mode is already active, the system will toggle back to OFF mode—provided the corresponding system (e.g., BuildingSystem, ManipulationSystem) exists and is enabled.</p><h2 id=system-requirements-per-mode>System Requirements per Mode</h2><p>Mode toggling only succeeds when its backing runtime systems and injected contexts are active (created + dependency validated). If a required system is missing or failed injection, pressing its action will either do nothing or immediately revert to OFF.</p><table><thead><tr><th>Mode</th><th>Requires Active System(s)</th><th>Additional Requirements</th><th>Notes</th></tr></thead><tbody><tr><td>Build (<code>BUILD</code>)</td><td><a href=../api/BuildingSystem/>BuildingSystem</a></td><td>States: <code>building</code>, <code>targeting</code>; IndicatorManager available via composition; valid <a href=../api/GBConfig/>GBConfig</a> settings.building</td><td>Second press toggles OFF if still in BUILD. Preview cleared on exit.</td></tr><tr><td>Move (<code>MOVE</code>)</td><td><a href=../api/ManipulationSystem/>ManipulationSystem</a></td><td>Active manipulatable target (via targeting state); <code>manipulation.parent</code> assigned</td><td>If setup fails (no target / invalid), status becomes FAILED and mode remains OFF.</td></tr><tr><td>Demolish (<code>DEMOLISH</code>)</td><td><a href=../api/ManipulationSystem/>ManipulationSystem</a></td><td>Target object with <a href=../api/Manipulatable/>Manipulatable</a> root; permissions in manipulation settings</td><td>Toggle pattern identical: press again returns OFF.</td></tr><tr><td>Info (<code>INFO</code>)</td><td><a href=../api/ManipulationSystem/>ManipulationSystem</a> (for name display / context)</td><td>Target or hover context resolvable; name displayer injected</td><td>Used for inspecting objects; does not modify placement context.</td></tr><tr><td>Off (<code>OFF</code>)</td><td>—</td><td>—</td><td>Entered explicitly or by pressing the currently active mode action again.</td></tr></tbody></table><p>Both <a href=../api/BuildingSystem/>BuildingSystem</a> and <a href=../api/ManipulationSystem/>ManipulationSystem</a> contain OFF-mode toggle logic independently. This redundancy ensures projects that exclude one system still achieve consistent press-again-to-off behavior without hidden coupling.</p><h3 id=validation--injection-impact>Validation / Injection Impact</h3><ul><li>All required systems must have passed <code>get_runtime_issues()</code> during composition container initialization. Warnings in the build log indicate missing dependencies that can block toggling.</li><li>For Build mode, if <code>_indicator_context.get_manager()</code> is null, the attempt to enter or perform build actions will fail silently or log a warning and remain OFF.</li><li>For Manipulation-derived modes (MOVE/DEMOLISH/INFO) a valid <code>_states.manipulation</code> context and target discovery (<code>GBSearchUtils.find_first</code>) are prerequisites.</li></ul><h3 id=failure-scenarios>Failure Scenarios</h3><table><thead><tr><th>Scenario</th><th>Result</th></tr></thead><tbody><tr><td>User presses Build but <a href=../api/BuildingSystem/>BuildingSystem</a> not present</td><td>No mode change (stays OFF)</td></tr><tr><td>User presses Move with no manipulatable target</td><td>Mode stays OFF; manipulation data status FAILED</td></tr><tr><td>User presses Demolish; system active but target root is null</td><td>Status FAILED; stays/off resets</td></tr><tr><td>User presses Build while already BUILD</td><td>Mode toggles to OFF, preview cleared</td></tr><tr><td>User presses Move again while MOVE</td><td>Mode toggles to OFF, move copy (if any) cleaned up</td></tr></tbody></table><h3 id=recommended-setup-order>Recommended Setup Order</h3><ol><li>Compose container & injector (<code>GBInjectorSystem.initialize</code>).</li><li>Verify build log: no dependency warnings for Building / Manipulation systems.</li><li>Confirm <a href=../api/IndicatorManager/>IndicatorManager</a> available (created via composition/injection).</li><li>Ensure <code>manipulation.parent</code> node assigned (used for parenting move copies).</li><li>Bind input actions mapping to invoke mode toggles.</li></ol><p>With these conditions satisfied, all mode toggles will exhibit consistent press-to-activate / press-again-to-off behavior.</p><h2 id=example>Example</h2><ul><li>Pressing the Build button (or key) once: enters Build mode.</li><li>Pressing the Build button (or key) again: returns to OFF mode.</li><li>This applies to Move, Demolish, and Info modes as well, as long as their systems are present.</li></ul><p>This behavior ensures quick toggling and prevents accidental mode lock-in during editing or gameplay.</p></div></main><aside class=gb-toc><div class=gb-toc-title>On this page</div><nav id=TableOfContents><ul><li><a href=#system-requirements-per-mode>System Requirements per Mode</a><ul><li><a href=#validation--injection-impact>Validation / Injection Impact</a></li><li><a href=#failure-scenarios>Failure Scenarios</a></li><li><a href=#recommended-setup-order>Recommended Setup Order</a></li></ul></li><li><a href=#example>Example</a></li></ul></nav></aside><footer class=gb-footer><p>&copy; 2025 Chris Tutorials. All rights reserved.</p><p>Built with <a href=https://gohugo.io/ target=_blank>Hugo</a> and
<a href=https://godotengine.org/ target=_blank>Godot</a>.</p></footer></div></body></html>